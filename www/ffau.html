<!DOCTYPE HTML>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title> BLOCKLY-WEB </title>
		<script src="js/blockly.min.js"></script>
		<script src="js/ffau/generate_html.js"></script>
		<script src="js/ffau/index.js"></script>
		<script src="js/jquery.min.2.1.3.js" onload="window.$ = window.jQuery = module.exports;"></script>
		<script src="js/bootstrap.toggle.min.js"></script>
		<script src="js/bootstrap.min.3.3.6.js"></script>
		<script src="lang/context_menu.js"></script>
		<script src="blocs&generateurs/ffau/css.js"></script>
		<script src="blocs&generateurs/ffau/html.js"></script>
		<script src="blocs&generateurs/ffau/js.js"></script>
		<script src="blocs&generateurs/ffau/blockly_blocs.js"></script>
		<script src="blocs&generateurs/ffau/blockly_generateurs_js.js"></script>
		<script src="blocs&generateurs/ffau/Blockly_fr.js"></script>
		<script src="blocs&generateurs/ffau/Arduino_fr.js"></script>
		<script src="js/ace/ace.js"></script>
		<script src="js/ace/ext-language_tools.js"></script>
		<link rel="stylesheet" href="css/bootstrap.toggle.min.css">
		<link rel="stylesheet" href="css/bootstrap.min.3.3.6.css">
		<link rel="stylesheet" href="css/fontawesome.css">
		<link id="theme_css" rel="stylesheet" href="css/ffau_sqlserver.css">
	</head>
	<body>
		<div id="toptitle">
			<div id="title">
				<strong><i class="fa fa-globe fa-1_75x fa-fw"></i> BLOCKLY-WEB</strong><span id="span_title2"></span><em><span id="span_file"></span></em>
			</div>
			<div id="title-bar-btns">
				<button id="btn_min" type="button" class="btn btn-minmaxgreen"><i class="fa fa-window-minimize fa-lg"></i></button>
				<button id="btn_max" type="button" class="btn btn-minmaxgreen"><i class="fa fa-window-restore fa-lg"></i></button>
				<button id="btn_quit" type="button" class="btn btn-quitgreen"><i class="fa fa-times fa-1_75x"></i></button>
			</div>
		</div>
		<div id="header">
			<div id="btn_left">
				<ul class="nav nav-tabs" role="tablist" style="display:none">
					<li role="presentation" class="active"><a href="#blocklyDiv" aria-controls="blocklyDiv" role="tab" data-toggle="tab"></a></li>
					<li role="presentation"><a href="#content_code" aria-controls="content_code" role="tab" data-toggle="tab"></a></li>
				</ul>
				<input type="file" id="loadText" accept=".www, .html" style="display:none">
				<input id="codeORblock" checked data-toggle="toggle" data-onstyle="default" data-offstyle="default" data-on="<img src='media/icon.png' style='height:20px'>" data-off="<i class='fa fa-code fa-1_5x'></i>" type="checkbox">
			</div>
			<div id="btn_center" class="btn-toolbar">
				<div class="btn-group">
					<button id="btn_new" class="btn btn-default"><i class="fa fa-file fa-1_5x btn_color"></i></button>
					<div class="btn-group">
						<button id="btn_example" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
							<i class="fa fa-file-text fa-1_5x btn_color"></i>
						</button>
						<ul class="dropdown-menu">
							<li class="dropdown-header">EXEMPLES</li>
							<li class="divider"></li>
							<li><a href="#" id="lien_hello"><i class="fa fa-book fa-fw"></i> Ma première page</a></li>
							<li><a href="#" id="lien_ia"><i class="fa fa-image fa-fw"></i> Une page simple avec image</a></li>
							<li><a href="#" id="lien_gafam"><i class="fa fa-css3 fa-fw"></i> Classe et CSS</a></li>
							<li><a href="#" id="lien_zen"><i class="fa fa-fa fa-fw"></i> Bootstrap et Fontawesome</a></li>
							<li><a href="#" id="lien_complexe"><i class="fa fa-html5 fa-fw"></i> Mon premier script</a></li>
						</ul>
					</div>
					<button id="btn_open" class="btn btn-default"><i class="fa fa-folder-open fa-1_5x btn_color"></i></button>
					<button id="btn_save" class="btn btn-default"><i class="fa fa-cloud-download fa-1_5x btn_color"></i></button>
				</div>
				<div class="btn-group">
					<button id="btn_config" class="btn btn-default" data-toggle="modal" data-target="#configModal">
						<i class="fa fa-cog fa-1_5x btn_color"></i>
					</button>
					<div class="btn-group">
						<button id="btn_img" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
							<i class="fa fa-image fa-1_5x btn_color"></i>
						</button>
						<ul class="dropdown-menu">
							<li class="dropdown-header">MEDIA</li>
							<li class="divider"></li>
							<li><a href="#" id="btn_add_media"><i class="fa fa-plus-circle fa-fw"></i> Ajouter</a></li>
							<li><a href="#" id="btn_media_view"><i class="fa fa-eye fa-fw"></i> Aperçu</a></li>
						</ul>
					</div>
					<button id="btn_download" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="Download">
						<i class="fa fa-download fa-1_5x btn_color"></i>
					</button>
					<button id="btn_upload" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="Upload">
						<i class="fa fa-upload fa-1_5x btn_color"></i>
					</button>					
				</div>
				<div class="btn-group">
					<button id="btn_undo" class="btn btn-default"><i class="fa fa-undo fa-1_5x btn_color"></i></button>
					<button id="btn_redo" class="btn btn-default"><i class="fa fa-repeat fa-1_5x btn_color"></i></button>
					<button id="btn_search" class="btn btn-default"><i class="fa fa-binoculars fa-1_5x btn_color"></i></button>
					<button id="btn_print" class="btn btn-default"><i class="fa fa-camera fa-1_5x btn_color"></i></button>
				</div>
			</div>
		</div>
		<div id="container">
			<div id="blockly_l"  class="tab-content">
				<div role="tabpanel" id="blocklyDiv" class="tab-pane fade in active" style="position: relative;"></div>
				<div role="tabpanel" id="content_code" class="tab-pane fade" onChange="update()"></div>
			</div>
			<iframe id="blockly_r" style="border:none"></iframe>
		</div>
		<!-- modal -->
		<div class="modal fade" id="ftpModal" tabindex="-1" role="dialog" aria-labelledby="ftpModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&#215;</span></button>
					<span class="fa fa-upload fa-2x" class="modal-title"> Connexion au serveur ftp</span>
				</div>
				<div class="modal-body">
					<div id="titreOK"></div>
					<form class="form-horizontal" id="monFormulaire" >
					  <div class="form-group">
						<label for="inputHost" class="col-sm-3 control-label">Nom hôte</label>
						<div class="col-sm-6">
						  <input type="text" class="form-control" id="inputHost" placeholder="ftpperso.free.fr">
						</div>
					  </div>
					  <div class="form-group">
						<label for="inputPort" class="col-sm-3 control-label">Port</label>
						<div class="col-sm-6">
						  <input type="text" class="form-control" id="inputPort" placeholder="21">
						</div>
					  </div>
					  <div class="form-group">
						<label for="inputId" class="col-sm-3 control-label">Identifiant</label>
						<div class="col-sm-6">
						  <input type="text" class="form-control" id="inputId" >
						</div>
					  </div>
					  <div class="form-group">
						<label for="inputPwd" class="col-sm-3 control-label">Mot de passe</label>
						<div class="col-sm-6">
						  <input type="password" class="form-control" id="inputPwd" >
						</div>
					  </div>
					  <div class="form-group">
						<label for="ftp_connect" class="col-sm-3 control-label">Statut</label>
						<div class="col-sm-6">
						  <span id="ftp_connect"><i class="fa fa-chain-broken fa-1_5x" style="color: red"></i> déconnecté</span><br>
						  <span id="ftp_transfert"></span>
						</div>
					  </div>
					</form>
				</div>
				<div class="modal-footer">
					<button id="btn_ftp" class="btn btn-danger"><i class="fa fa-arrow-right fa-1_5x"></i> Transférer</button>
				</div>
			</div>
		  </div>
		</div>
		<div class="modal fade" id="configModal" tabindex="-1" role="dialog" aria-labelledby="configModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&#215;</span>
						</button>
						<span class="fa fa-cog fa-2x" class="modal-title"> Préférences</span>
					</div>
					<div class="modal-body" >
						<label id="span_theme">Thème : </label>
						<select id="theme">
							<option value="monokai">Sombre</option>
							<option value="sqlserver" selected="selected">Clair</option>
						</select><br><br>
						<label id="span_fontsize">Taille de police : </label>
						<select id="fontsize">
							<option value="12px">12</option>
							<option value="14px" selected="selected">14</option>
							<option value="16px">16</option>
							<option value="18px">18</option>
							<option value="20px">20</option>
							<option value="22px">22</option>
						</select><br><br>
						<label id="span_fontsize">Cache : </label>
						<button id="btn_html_explore" class="btn btn-default btn-xs">
							<i class="fa fa-folder"></i> Aperçu
						</button>
						<button id="btn_reset" class="btn btn-danger btn-xs">
							<i class="fa fa-trash-o" ></i> Vider
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="message" tabindex="-1" role="dialog" aria-labelledby="messageModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-body" >
						Pour avoir un aperçu de la page il faut lui donner un nouveau titre.<br>
						Utiliser les balises HEAD et TITLE !
					</div>  
				</div>
			</div>
		</div>
		<xml id="toolbox" style="display:none">
		<category colour="#4a235a" name="Structure">
			<block type="head"></block>
			<block type="title"></block>
			<block type="jquery"></block>
			<block type="bootstrap"></block>
			<block type="w3"></block>
			<block type="fontawesome"></block>
			<block type="initMap"></block>
			<block type="body"></block>
			<block type="linebreak"></block>
			<block type="hline"></block>
			<block type="balise_orph"></block>
			<block type="balise"></block>
		</category>
		<category colour="#bbbbbb" name="Texte">
			<block type="emptytext"></block>
			<block type="text"></block>
			<block type="text_char"></block>
			<block type="emptytext">
				<field name='content'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</field>
			</block>
		</category>
		<category colour="#787746" name="en-bloc">
			<block type="paragraph"></block>
			<block type="header"></block>
			<block type="divider"></block>
			<block type="map"></block>
		</category>
		<category colour="#006000" name="en-ligne">
			<block type="span"></block>
			<block type="textmod"></block>
			<block type="button"></block>
			<block type="link"></block>
			<block type="icon"></block>
		</category>
		<category colour="#804000" name="Table">
			<block type="table"></block>
			<block type="tablerow"></block>
			<block type="tableheading"></block>
			<block type="tabledata"></block>
		</category>
		<category colour="#FD6C9E" name="Liste">
			<block type="unorderedlist"></block>
			<block type="orderedlist"></block>
			<block type="listitem"></block>
		</category>
		<category colour="#154360" name="Formulaire">
			<block type="form"></block>
			<block type="input"></block>
			<block type="label"></block>
			<block type="select"></block>
			<block type="option"></block>
		</category>
		<category colour="#00cc00" name="Media">
			<block type="image"></block>
			<block type="audios"></block>
			<block type="video_file"></block>
			<block type="videos"></block>
		</category>
		<category colour="#727272" name="Attribut">
			<block type="stylearg"></block>
			<block type="class"></block>
			<block type="id"></block>		
			<block type="attr_title"></block>
			<block type="tabindex"></block>
			<block type="emptyarg"></block>	
		</category>
		<category colour="#00929F" name="CSS">
			<block type="style"></block>
			<block type="cssitem"></block>
			<block type="othercss"></block>
			<category colour="#00929F" name="Texte">
				<block type="fontsize"></block>
				<block type="fontfamily"></block>
				<block type="textdecoration"></block>
				<block type="texttransform"></block>
				<block type="textalign"></block>
			</category>
			<category colour="#00929F" name="Couleur">
				<block type="color_picker"></block>
				<block type="hex_picker"></block>
				<block type="rgba_picker"></block>
				<block type="color-new"></block>
				<block type="bgcolor-new"></block>
				<block type="background"></block>
			</category>
			<category colour="#00929F" name="Bordure">
				<block type="borderedge-new"></block>
				<block type="borderrad"></block>
				<block type="bordercollapse"></block>
			</category>
			<category colour="#00929F" name="Arrangement">
				<block type="display"></block>
				<block type="tblr"></block>
				<block type="grid"></block>
				<block type="position"></block>
				<block type="margin"></block>
				<block type="padding"></block>
				<block type="float"></block>
				<block type="verticalalign"></block>
				<block type="widthheightnum"></block>
			</category>
			<category colour="#ffff33" name="Bootstrap">
				<block type="role"></block>
				<block type="B_data"></block>
				<block type="B_class_modal"></block>
				<block type="B_class_img"></block>
				<block type="B_class_btn"></block>
				<block type="B_class_dropdown"></block>
				<block type="B_class_alert"></block>
			</category>
			<category colour="#66ff99" name="W3">
				<block type="w3_class"></block>
				<block type="w3_onclick"></block>
				<block type="w3_btn"></block>
				<block type="w3_color"></block>
				<block type="w3_hover_color"></block>
				<block type="w3_round"></block>
				<block type="w3_tooltip"></block>
				<block type="w3_modal"></block>
				<block type="w3_panel"></block>
				<block type="w3_dropdown"></block>
			</category>
		</category>
		<category colour="#FF0000" name="JS">
			<block type="balise_js"></block>
			<block type="jquery_event"></block>
			<block type="jquery_get"></block>
			<block type="jquery_set"></block>
			<block type="jquery_css_set"></block>
			<category colour="#727272" name="Contrôle">
				<block type="controls_if"></block>
				<block type="controls_if"><mutation else="1"></mutation></block>
				<block type="true_false"></block>
				<block type="controls_repeat_ext"></block>
				<block type="controls_whileUntil"></block>
				<block type="logic_operation"></block>
				<block type="controls_for"></block>
				<block type="controls_switch"></block>
				<block type="controls_flow_statements"></block>
				<block type="logic_negate"></block>
				<block type="logic_null"></block>
			</category>
			<category colour="#00cc00" name="Math">
			    <block type="math_number"></block>
			    <block type="math_xy"></block>
				<block type="logic_compare"></block>
				<block type="math_arithmetic"></block>
				<block type="math_single"></block>
				<block type="math_round"></block>
				<block type="math_trig"></block>
				<block type="math_constant"></block>
				<block type="math_number_property"></block>
				<block type="math_modulo"></block>
				<block type="math_random_int"></block>
			</category>
			<category colour="#154360" name="OpenStreetMap">
				<block type="viewMap"></block>
				<block type="bindpopup"></block>
				<block type="bindpopupHTML"></block>
				<block type="scale"></block>
				<block type="marker"></block>
				<block type="line"></block>
				<block type="circle"></block>
				<block type="polygon"></block>
				<block type="onclick"></block>
				<block type="onRightclick"></block>
				<block type="routing"></block>
				<block type="HTMLoverlay"></block>
			</category>
			<category colour="#FFA500" custom="VARIABLE" name="Variable"></category>
		</category>
		</xml>
	</body>
	<script>
		ace.require("ace/ext/language_tools");
		var editor = ace.edit("content_code");
		editor.setTheme('ace/theme/sqlserver');
		editor.session.setTabSize(2);
		editor.setShowPrintMargin(false);
		editor.session.setMode("ace/mode/html");
		editor.session.on('change', function(){update()});
		editor.setOptions({
			enableBasicAutocompletion: true,
			enableSnippets: true,
			enableLiveAutocompletion: true
		})
		function update(){
			var ace = editor.getValue();
			document.getElementById("blockly_r").srcdoc = ace
		}
		require('../resources/app/ffau.js')
	</script>
</html>